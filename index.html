<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>The Scrapyard</title>
    
    <link rel="stylesheet" type="text/css" href="http://www.thescrapyard.org/css/markdown.css" />

    <script type="text/javascript" src="http://www.thescrapyard.org/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link href="http://www.thescrapyard.org/prettify/tomorrow.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="http://www.thescrapyard.org/prettify/prettify.js"></script>

    <!-- <script type="text/javascript" src="http://www.thescrapyard.org/prettify/run_prettify.js?skin=tomorrow"></script> -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52980401-1', 'auto');
  ga('send', 'pageview');
</script>

  </head>
  <body onload="prettyPrint()">
    <div class="container">
      <!-- Markdown content starts here -->

<hr>

<h1 id="the-scrapyard">The Scrapyard</h1>

<p style="margin-left:2em;margin-bottom:2em;width:35em;text-indent:-0.5em;font-family:lucida sans unicode, lucida sans, lucida grande, sans-serif;">
<strong>scrapyard</strong> /skɹæpjɑː(ɹ)d/ <i>n.</i> (<i>pl.</i> <strong>-s</strong>) 
<strong>1</strong> A junkyard, a place where scrap is stored, discarded or resold. 
<strong>2</strong> A place for tinkerers and kludgers to store important parts for later.
</p>

<p>This is where I collect my parts: information I’ve gathered, projects I’ve worked on, and whatever else I find that might be useful or interesting. You can also check out my GitHub repositories <a href="http://github.com/jdeblese">here</a>.</p>

<hr><div class="se-section-delimiter"></div>

<h3 id="hardware">Hardware</h3>

<ol>
<li><p><a href="hw/rfpowerref.html">RF Power Reference</a> <br>
A small, 120 MHz, +2dBm ±1dB power reference board.</p></li>
<li><p><a href="hw/ledsmps.html">LED SMPS Driver</a> <br>
PWM-controllable current supply for high-power LEDs up to 14 W.</p></li>
</ol>

<h3 id="fpgas">FPGAs</h3>

<ol>
<li><p><a href="fpga/mwcounter.html">Microwave Frequency Counter</a> <br>
A reciprocal frequency counter implemented on a Xilinx Spartan-6 FPGA, currently with a range of about 400 Hz to 400 MHz and a precision of four digits.</p></li>
<li><p><a href="fpga/oled.html">OLED Module Interface</a> <br>
Low-level interface for a Digilent OLED peripheral module.</p></li>
<li><p><a href="fpga/clocksync.html">Clock Synchronization</a> <br>
Creating a PLL using only digital logic, to synchronize a high-frequency clock derived from the master FPGA clock to an external low frequency reference signal.</p></li>
<li><p><a href="fpga/fpgavr.html">AVR Programmer</a> <br>
An implementation of the STK500 protocol.</p></li>
</ol>

<h3 id="software">Software</h3>

<ol>
<li><p><a href="software/libdvdcpxm.html">Linux DVD-A Decryption</a> <br>
A library to decrypt DVD-Audio discs.</p></li>
<li><p><a href="software/ergovolve.html">Evolutionary optimization of a keycap group buy</a> <br>
Using genetic algorithms to determine, given a maximum number of key labels, the optimal set of labels that covers as many known Ergodox keyboard layouts as possible.</p></li>
</ol>

<p></p>

<hr>

<h3 id="miscelaneous-ramblings">Miscelaneous Ramblings</h3>

<h4 id="20140724-chromeos-openvpn-to-routeros">2014/07/24 - ChromeOS OpenVPN to RouterOS</h4>

<p>I’ve been trying to connect my Chromebook to a Mikrotik box via VPN, and thougth I’d share some of my debugging results. This is not meant to be an OpenVPN tutorial - there are plenty of those around - but will merely give what is needed to make this particular setup work.</p>

<p>The main issue is that it seems that <strong>remote-cert-tls</strong> has been enabeled on ChromeOS, which means that the server key must have the proper <em>Key Usage</em> and <em>Extended Key Usage</em> extensions. Using the RouterOS <strong>sign-certificate-request</strong> command will not set these, so a separate setup is required. A certificate request can be created anywhere, including on RouterOS, but to sign the key using OpenSSL you need to issue a command along the lines of:</p>

<pre><code>openssl x509 -req -days 365 -in server.csr -CA ca.crt -CAkey ca.key -set_serial 01 -extensions v3_req -extfile ext.cnf -out server.crt
</code></pre>

<p>Note the <strong>-extensions</strong> and the <strong>-extfile</strong> arguments (thanks to <a href="http://www.mytidbitz.com/?p=109">emeka</a>). The first tells x509 to go looking in the <em>v3_req</em> section of <em>ext.cnf</em>, which is a standard OpenSSL configuration file. Based on various online comments (<a href="https://forums.openvpn.net/topic7484.html#p9220">here</a>, for instance), make sure your <em>ext.cnf</em> file contains at least the following:</p>

<pre><code>[ v3_req ]

keyUsage = critical, digitalSignature, keyAgreement
extendedKeyUsage = critical, serverAuth
</code></pre>

<p>The specification for these two lines can be found <a href="https://www.openssl.org/docs/apps/x509v3_config.html#Key_Usage_">here</a>. The two <em>critical</em> arguments may not be necessary, but I haven’t tested that.</p>

<p>The second issue is that ChromeOS by default uses UDP for OpenVPN connections, while RouterOS only supports TCP. This can be circumvented by creating an ONC file to add the VPN connection rather than using the GUI under settings. I’ve had some luck with the following (anonymized) file, the source of which I’ve forgotten:</p>

<pre><code>{
    "Type": "UnencryptedConfiguration",
    "NetworkConfigurations": [
        {
            "GUID": "{vpn4us201304041651}",
            "Name": "HermesTest",
            "Type": "VPN",
            "VPN": {
                    "Type": "OpenVPN",
                    "Host": "",
                    "OpenVPN":
                            {
                            "ClientCertType": "None",
                            "CompLZO": "false",
                            "Port": 1194,
                            "Proto": "tcp",
                            "SaveCredentials": true,
                            "ServerPollTimeout": 360,
                            "ServerCARef": "{CA}"
                            }
                    }
        }
    ],
    "Certificates": [
        {
            "GUID": "{CA}",
            "Type": "Authority",
            "X509": "-----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----"
        }
    ]
}
</code></pre>

<p>See the <a href="https://docs.google.com/a/thescrapyard.org/viewer?a=v&amp;pid=sites&amp;srcid=Y2hyb21pdW0ub3JnfGRldnxneDo1ZDY0OGFhNGI2YzE0ZTgy">Open Network Configuration Format</a> document for a reference. The X509 certificate should be the PEM certificate all on one line. Import this file via <em>chrome://net-internals/#chromeos</em>, and you should have a new VPN connection configured.</p>

<p>Don’t forget to add and your CA certificate under Settings/Certificates, and configure RouterOS as described <a href="http://wiki.mikrotik.com/wiki/OpenVPN">here</a>. This gets me as far as creating a successful connection, with both sides assigned an IP, but neither side able to ping the other. I have yet to figure out where the traffic is disappearing to.</p><div class="se-section-delimiter"></div>

<h4 id="20140718-new-soldering-station">2014/07/18 - New Soldering Station</h4>

<p>Just acquired a Metcal soldering station, and the thing’s a real luxury compared to what I’m used to. It soldered a connector to a Star MCPCB and then some 1206 SMD capacitors to another PCB without a hitch.</p>

<p>For people unfamiliar with these (as I was until recently) they’re soldering irons that use RF @ 13.56 MHz to directly heat the tip of the iron. It’s a fixed-temperature system, with a heater welded to the tip so power transfer is excellent. Apparently it can’t go out of calibration, and thanks to the good power transfer you’d only really need temperature control if you were soldering thermally sensitive components. The major downside is that the tips, or “cartridges”, are noticeably more expensive than other tips.</p>

<p>A new MX station is very expensive, but you can get a second-hand setup for a fairly reasonable price. The old RFG-30 supplies used in the STSS stations are on eBay for $50–100, and they’re compatible with the modern MX hand-pieces and cartridges. I got a supply from an STSS-002 and a new MX-H1-AV kit (hand-piece and holder) and can confirm that they work together. The supply hums a bit, but apparently that’s normal, and in fact you can tell how much power the tip’s drawing by the intensity of the hum. </p>

<p>All in all, a nice piece of hardware.</p>

     <!-- Markdown content ends here -->
    </div>

    <hr>
    <p>Written with <a href="https://stackedit.io/">StackEdit</a> using <a href="http://kevinburke.bitbucket.org/markdowncss/">markdown.css</a>, <a href="https://code.google.com/p/google-code-prettify/">google-code-prettify</a> and <a href="http://www.mathjax.org/">MathJax</a>.</p>

  </body>
</html>